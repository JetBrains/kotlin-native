package = ffmpeg
headers = libavcodec/avcodec.h libavformat/avformat.h libavutil/pixfmt.h libavutil/opt.h \
          libswscale/swscale.h libavresample/avresample.h
linkerOpts = -lavutil -lavformat -lavcodec -lz -lswscale -lavresample -lm
compilerOpts.linux = -D_ANSI_SOURCE -D_POSIX_C_SOURCE=199309 -D_BSD_SOURCE \
               -D_XOPEN_SOURCE=700
excludedFunctions.linux = \
		    __acos __asin __atan __atan2 __cos __sin __tan __cosh __sinh \
		    __tanh __acosh __asinh __atanh __exp __frexp __ldexp __log __log10 \
		    __modf __expm1 __log1p __logb __exp2 __log2 __pow __sqrt __hypot \
		    __cbrt __ceil __fabs __floor __fmod __drem __significand __copysign \
		    __nan __j0 __j1 __jn __y0 __y1 __yn __erf __erfc __lgamma __tgamma \
		    __gamma __lgamma_r __rint __nextafter __remainder __scalbn __ilogb \
		    __scalbln __nearbyint __round __trunc __remquo __lrint __llrint \
		    __lround __llround __fdim __fmax __fmin __fma __scalb __acosf __asinf \
		    __atanf __atan2f __cosf __sinf __tanf __coshf __sinhf __tanhf __acoshf \
		    __asinhf __atanhf __expf __frexpf __ldexpf __logf __log10f __modff \
		    __expm1f __log1pf __logbf __exp2f __log2f __powf __sqrtf __hypotf \
		    __cbrtf __ceilf __fabsf __floorf __fmodf __dremf __significandf \
		    __copysignf __nanf __j0f __j1f __jnf __y0f __y1f __ynf __erff \
		    __erfcf __lgammaf __tgammaf __gammaf __lgammaf_r __rintf __nextafterf \
		    __remainderf __scalbnf __ilogbf __scalblnf __nearbyintf __roundf __truncf \
		    __remquof __lrintf __llrintf __lroundf __llroundf __fdimf __fmaxf __fminf \
		    __fmaf __scalbf _ns_flagdata
---

static void av_buffer_unref2(AVBufferRef* ref) {
    AVBufferRef* copy = ref;
    av_buffer_unref(&copy);
}

static void avcodec_free_context2(AVCodecContext* ref) {
    AVCodecContext* copy = ref;
    avcodec_free_context(&copy);
}

static void avformat_free_context2(AVFormatContext* ref) {
    AVFormatContext* copy = ref;
    avformat_free_context(&copy);
}

static void avresample_free2(AVAudioResampleContext* ref) {
    AVAudioResampleContext* copy = ref;
    avresample_free(&copy);
}
