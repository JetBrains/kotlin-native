import org.jetbrains.kotlin.CompileCppToBitcode

// TODO: consider using some Gradle plugins to build and test

targetList.each { targetName ->
    task ("${targetName}Hash", type: CompileCppToBitcode) {
        name 'hash'
        target targetName
        compilerArgs targetArgs[targetName]
    }
}

task build {
    dependsOn hostHash
}

task clean << {
    delete buildDir
}
