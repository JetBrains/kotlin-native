//ant.importBuild 'backend.native/kotlin-ir/build.xml'

if (new File("$project.rootDir/local.properties").exists()) {
  Properties props = new Properties()
  props.load(new FileInputStream("$project.rootDir/local.properties"))
  props.each {prop -> project.ext.set(prop.key, prop.value)}
}

allprojects {
    if (path != ":dependencies") {
        evaluationDependsOn(":dependencies")
    }

    afterEvaluate {
        if (plugins.hasPlugin('c')) {
            model {
                toolChains {
                    clang(Clang) {
                        path "$llvmDir/bin"

                        // The system PATH should be appended automatically according to Gradle docs,
                        // but this doesn't seem to happen
                        path System.env.PATH.split(File.pathSeparator)
                    }
                }
            }
        }
    }
}